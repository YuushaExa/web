function removeHtmlTag(e,s){for(var t=e.split(&quot;&lt;&quot;),i=0;i&lt;t.length;i++)-1!=t[i].indexOf(&quot;&gt;&quot;)&amp;&amp;(t[i]=t[i].substring(t[i].indexOf(&quot;&gt;&quot;)+1,t[i].length));return t=(t=t.join(&quot;&quot;)).substring(0,s-1)}imgr=new Array,aBold=showRandomImg=!(imgr[0]=&quot;&quot;),summaryTitle=summaryPost=300,numposts1=12,numposts2=4,function(n){function t(e,s){this.elem=e,this.settings=s,this.addAjaxHtml(),this.ajaxcall=null,this.lielem=this.elem.find(&quot;.verticlemenu li a&quot;),this.menuHelper(this.elem),this.addEvents()}t.prototype={regex:{islabel:new RegExp(&quot;/search/label/&quot;,&quot;g&quot;),issearch:new RegExp(&quot;[?&amp;]q=&quot;,&quot;g&quot;),labelsearch:new RegExp(&quot;(https://[^/]+)/search/label/([^/?&amp;]+).*[?&amp;]q=([^$&amp;]+)(?:[^$]+)?&quot;,&quot;g&quot;),label:new RegExp(&quot;(https://[^/]+)/search/label/([^/?&amp;$]+)&quot;,&quot;g&quot;),search:new RegExp(&quot;(https://[^/]+)/search/?[?&amp;]q=(.*)&quot;,&quot;g&quot;)},addEvents:function(){var e=this;this.lielem.hover(function(){&quot;true&quot;!==n(this).data(&quot;menuloaded&quot;)&amp;&amp;(e.li=n(this),e.url=e.li.attr(&quot;href&quot;),e.container=e.li.closest(&quot;ul&quot;).siblings(&quot;ul&quot;),e.hoverOver())},function(){e.hoverOut()})},hoverOver:function(){var s=this;this.getAJAXUrl(),this.ajaxUrl&amp;&amp;(this.ajaxcall=n.ajax({type:&quot;GET&quot;,url:s.ajaxUrl,dataType:&quot;jsonp&quot;,data:s.ajaxData,beforeSend:function(){s.showLoader()},success:function(e){s.hideLoader(),s.addArrow(),s.showPosts(e)},error:function(e){s.showError(e)}}))},hoverOut:function(){this.ajaxcall.abort(),this.hideLoader()},getAJAXUrl:function(){if(this.url){var a=this;this.ajaxData={alt:&quot;json&quot;,&quot;max-results&quot;:this.settings.numPosts},-1!==this.url.search(this.regex.islabel)&amp;&amp;-1!==this.url.search(this.regex.issearch)?this.ajaxUrl=this.url.replace(this.regex.labelsearch,function(e,s,t,i){return a.ajaxData.q=i,[s,&quot;/feeds/posts/summary/-/&quot;,t,&quot;/&quot;].join(&quot;&quot;)}):-1!==this.url.search(this.regex.islabel)&amp;&amp;-1===this.url.search(this.regex.issearch)?this.ajaxUrl=this.url.replace(this.regex.label,function(e,s,t){return delete a.ajaxData.q,[s,&quot;/feeds/posts/summary/-/&quot;,t,&quot;/&quot;].join(&quot;&quot;)}):-1===this.url.search(this.regex.islabel)&amp;&amp;-1!==this.url.search(this.regex.issearch)?this.ajaxUrl=this.url.replace(this.regex.search,function(e,s,t){return a.ajaxData.q=t,[s,&quot;/feeds/posts/summary&quot;].join(&quot;&quot;)}):this.ajaxUrl=!1}else this.ajaxUrl=!1},showLoader:function(){n(&quot;&lt;span&gt;&lt;/span&gt;&quot;,{class:&quot;loader&quot;}).appendTo(this.li.closest(&quot;li&quot;))},hideLoader:function(){this.li.closest(&quot;li&quot;).find(&quot;span.loader&quot;).remove()},showPosts:function(e){var t,i,a,r=this,l=[];0&lt;e.feed.openSearch$totalResults.$t?n.each(e.feed.entry,function(e,s){t=s.title.$t,n.each(s.link,function(e,s){i=&quot;alternate&quot;===s.rel?s.href:&quot;#&quot;}),a=s.media$thumbnail?s.media$thumbnail.url.replace(/\/s72\-c\//,&quot;/s100-c/&quot;):r.settings.defaultImg,l.push(&#39;&lt;li&gt;&lt;span class=&quot;imgCont&quot;&gt;&lt;img alt=&quot;&#39;,t,&#39;&quot; src=&quot;&#39;,a,&#39;&quot;/&gt;&lt;/span&gt;&lt;a rel=&quot;nofollow&quot; title=&quot;&#39;,t,&#39;&quot; href=&quot;&#39;,i,&#39;&quot;&gt;&#39;,t,&quot;&lt;/a&gt;&lt;/li&gt;&quot;)}):l.push(&quot;&lt;h5&gt;&quot;,&quot;Sorry!!, No Posts to Show&quot;,&quot;&lt;/h5&gt;&quot;),this.container.html(l.join(&quot;&quot;)),this.lielem.removeData(&quot;menuloaded&quot;),this.li.data(&quot;menuloaded&quot;,&quot;true&quot;)},showError:function(e){&quot;error&quot;===e.statusText&amp;&amp;(this.hideLoader(),this.addArrow(),this.container.html(&quot;&lt;h5&gt;Error!! Could not fetch the Blog Posts!&lt;/h5&gt;&quot;))},addArrow:function(){this.lielem.closest(&quot;li&quot;).find(&quot;span&quot;).remove(),this.lielem.removeClass(&quot;hoverover&quot;),this.li.addClass(&quot;hoverover&quot;),n(&quot;&lt;span&gt;&lt;/span&gt;&quot;,{class:&quot;menuArrow&quot;}).appendTo(this.li.closest(&quot;li&quot;))},menuHelper:function(e){var t=this;e.find(&quot;&gt;li&quot;).hover(function(){var e=n(this);e.find(&quot;a:first&quot;).addClass(&quot;hoverover&quot;);var s=n(this).find(&quot;ul.verticlemenu li&quot;).height()*n(this).find(&quot;ul.verticlemenu li&quot;).length;e.find(&quot;ul.postslist&quot;).css({&quot;min-height&quot;:s+&quot;px&quot;}),t.requestFirstAjax(e)},function(){n(this).find(&quot;a:first&quot;).removeClass(&quot;hoverover&quot;)})},addAjaxHtml:function(){this.elem.find(&quot;ul ul&quot;).remove(),this.elem.addClass(&quot;w2bajaxmenu&quot;).find(&quot;&gt;li&quot;).find(&quot;ul:first&quot;).addClass(&quot;verticlemenu&quot;).wrap(n(&quot;&lt;div&gt;&lt;/div&gt;&quot;,{class:this.settings.divClass})),n(&quot;ul.verticlemenu&quot;).after(n(&quot;&lt;ul&gt;&lt;/ul&gt;&quot;,{class:&quot;postslist&quot;}))},requestFirstAjax:function(e){e=e.find(&quot;.verticlemenu li:first-child a&quot;),this.url=e.attr(&quot;href&quot;),this.container=e.closest(&quot;ul&quot;).siblings(&quot;ul&quot;),this.li=e,this.hoverOver()}},n.fn.ajaxBloggerMenu=function(e){var s=n.extend({},{numPosts:8,divClass:&quot;submenu&quot;,postsClass:&quot;postslist&quot;,defaultImg:&quot;/default.png&quot;},e);return this.each(function(){new t(n(this),s)})}}(jQuery);
